## 운영체제 관련 질문들

### 기본 용어 정리

- 운영체제의 정의 : 운영 체제는 컴퓨터의 성능을 향상할 뿐 아니라 자원을 관리하고 사용자에게 편리한 인터페이스를 제공하는 소프트웨어
- 운영체제의 역할 : 자원 관리, 자원 보호, 하드웨어/사용자 인터페이스 제공
- 시분할시스템 : CPU에서 여러 작업을 동시에 처리하기 위해 구현되는 시스템으로, 각 작업을 잘게 쪼개어 CPU 자원을 할당, 모든 작업이 동시에 처리되는 것처럼 보이게 함
- kernel : 운영체제는 크게 커널과 인터페이스로 나눌 수 있는데, 여기서 커널은 운영체제의 핵심 기능을 모아 놓은 것으로 프로세스, 메모리, 저장장치 관리, 프로세스간 통신과 같은 주요 업무를 수행한다.
- Thread(스레드) : CPU가 처리할 수 있는 작업의 단위/한 프로세스 내에서 실행되는 동작의 단위를 말함. 보통 프로세스와 스레드를 같이 공부하게 되는데 **운영체제 입장에서 작업 단위는 프로세스가 되고, 실제 작업을 수행하게 되는 CPU입장에서 작업 단위는 스레드가 된다**고 보면 된다. `즉 프로세스 코드에 정의된 절차에 따라 CPU에 작업 요청을 하는 실행 단위라고 볼 수 있다.`
- 멀티스레드 : 한번에 여러개의 스레드를 처리하는 방식. 즉 하나의 프로세스에서 여러 작업을 병렬로 처리하는 방식으로 각 스레드는 stack 메모리 영역을 제외한 나머지 영역인 Code/Data/Heap 영역을 공유하게 됨.

>1. 프로세스에 대한 설명

  - 프로세스는 운영체제에서 하나의 작업 단위를 말한다. 폰노이만 구조에서 프로그램은 코드가 메모리에 올라와서 작업이 진행된다. `프로세스는 이렇게 실행을 위해 프로그램이 메모리에 적재되어 CPU를 할당받아 실행되는 것을 말한다.`
  프로세스에 할당되는 메모리 공간은 code/data/stack/heap의 4개 영역으로 이루어져있고 각 프로세스는 이 메모리 영역을 독립적으로 할당받는다. 

    >1-1. 프로세스 메모리 영역에 대한 설명

    - code영역은 실행한 프로그램의 코드가 저장된다.
    - data영역은 프로그램의 전역변수와 static변수가 저장된다.
    - stack영역은 함수 호출시 생성되는 지역변수와 매개변수가 저장된다.
    - heap영역은 프로그래머가 직접 공간을 할당/해제하는 메모리 영역이다.
    참고로 code영역과 data영역은 프로세스가 실행되기 전에 위치와 크기가 결정되는 **정적 할당 영역**이고, stack과 heap영역은 프로세스가 실행되는 동안 만들어지는 **동적 할당 영역**이다.

    >1-2. PCB(Process Control Block)에 대한 설명

    - 프로그램은 PCB, 즉 프로세스 제어 블록을 얻음으로써 프로세스가 된다. 프로세스 제어블록에는 프로세스를 처리하는데 필요한 다양한 정보가 저장된다. 대표적인 정보로 프로세스 구분자/메모리 관련 정보/각종 중간값이 있다.
    프로세스 구분자는 각 프로세스를 구분하기 위한 ID라 볼수 있고, 메모리 관련 정보는 메모리의 위치정보 및 메모리 보호를 위한 경계 레지스터, 한계 레지스터 등을 말한다. 각종 중간값은 각 프로세스들이 어디까지 진행되었는지를 나타내는 정보로 시분할 시스템에서는 한 프로세스가 매우 짧은 시간동안 CPU를 점유하여 일정부분의 명령을 수행하고 다른 프로세스에게 넘기기 때문에 다음에 다시 차례가 돌아오면 이전 명령에 이어 작업을 수행해야 한다. 이를 위해 중간값을 PCB에 저장하게 된다.

    >1-3. Context에 대한 설명

    - context는 프로세스가 현재 어떤 상태인지 나타내는 정보로 PCB에 저장된다. 하나의 프로세스가 다른 프로세스로 제어권을 넘길 때(타임아웃, 인터럽트 등으로 인해), CPU를 차지하던 프로세스가 나가고 새로운 프로세스가 들어오며 지금까지의 작업 내용을 PCB에 저장하고 새로운 프로세스의 PCB 내용을 불러오는데 이를 **Context switch(문맥교환)**이라 부른다.

    >1-4. 프로세스의 state에 대한 설명

    - 프로세스는 **생성/준비/실행/대기/완료**의 다섯가지 활성상태와 추가로 휴식/보류 상태가 있다.
    - **생성상태** : 프로그램이 메모리에 올라오고 운영체제로 부터 프로세스 제어 블록을 할당받은 상태
    - **준비상태** : 실행 대기 중인 모든 프로세스가 자기 차례를 기다리는 상태
    - **실행상태** : 프로세스가 CPU를 할당받아 실행되는 상태
    - **대기상태** : 실행상태에 있는 프로세스가 입출력을 요청하고 입출력이 완료될때까지 기다리는 상태
    - **완료상태** : 프로세스가 종료되는 상태
    - 휴식상태 : 프로세스가 작업을 일시적으로 쉬고 있는 상태
    - 보류상태 : 프로세스가 메모리에서 잠시 쫓겨난 상태

>2. 파이프라인 기법에 대한 설명

 - **파이프라인 기법**은 명령을 겹쳐서 실행하는 방법으로, 하나의 CPU 코어에 여러개의 스레드를 사용하는 방식이다.
 파이프라인 기법은 데이터 위험/제어 위험/구조 위험이라 불리는 문제가 있다.
 **데이터 위험**은 데이터의 의존성 때문에 발생하는 문제로 서로 다른 명령어가 의존성을 가질 경우 하나의 명령어가 끝날 때 까지 다른 명령어의 실행이 불가능해지는 현상을 말한다.
**제어 위험**은 조건문 같은 분기문에서 발생 할 수 있는 문제로 이러한 분기문으로 인해 프로그램 카운터의 값이 갑자기 변경되어 발생하는 위험이다. 프로그램 카운터로 인해 주소가 변경되면 현재 처리되고 있는 명령어 중 쓸모없는 명령어가 발생 할 수 있다.
**구조 위험** 서로 다른 명령어가 같은 자원에 접근하려 할 때 발생하는 문제이다.

>3. 슈퍼스칼라 기법에 대한 설명

- **슈퍼스칼라**는 여러개의 파이프라인을 두어 복수의 명령어를 동시에 실행하는 기술이다. 파이프라인과 유사하지만 각 단계에서 동시에 여러개의 명령어를 실행한다는 점이 다르다.

>4. 멀티 프로세스에 대한 설명

- 멀티 프로세스란 2개 이상의 프로세스가 동시에 실행되는 것으로 동시성과 병렬성 두가지 방식이 있다. 
**동시성**은 시분할 시스템을 바탕으로 여러 프로세스를 짧은 시간동안 번갈아 실행하는 것을 말하고, **병렬성**은 멀티 코어를 바탕으로 각각의 프로세스가 동시에 실행되는 것을 말한다. 
멀티 프로세스에서 각 프로세스는 각자의 메모리 영역을 차지하는데 이러한 부분에서 멀티스레드와 차이가 있다.

>5. 멀티 스레드에 대한 설명

- 프로세스 내 작업을 여러개의 스레드로 분할한 것으로 작업의 부담을 줄이는 프로세스 운영 기법을 말한다. 
멀티스레드는 프로세스 메모리 영역에서 정적 영역은 공유하지만 동적 영역(레지스터, stack)은 별도로 할당 받게 된다.
각 스레드가 독립적인 스택 메모리 영역과 레지스터가 필요한 이유는 각 스레드는 독립적으로 함수를 호출하게 되는데 이러한 함수의 지역변수, 매개변수를 관리하는 메모리 영역이 스택 영역이기 때문이다. 또한 각 스레드 사이에서도 프로세스와 마찬가지로 context switch가 일어나기 때문에 별도의 PC 레지스터가 필요하고 이로 인해 각 스레드는 독립적인 스택 메모리 영역과 레지스터를 할당 받는다. 

>6. 멀티 프로세스 vs 멀티 스레드

- 효율성 : 멀티 스레드는 멀티 프로세스와 달리 불필요한 자원의 중복이 없어 시스템의 효율이 향상된다.
- 자원공유 : 멀티 스레드는 프로세스가 가진 자원을 모든 스레드가 공유하게 되어 작업을 원할하게 진행할 수 있고 context switching이 빠르다. 
- 안정성 : 멀티 스레드는 모든 스레드가 자원을 공유하기 때문에 하나의 스레드 장애가 전체 스레드로 전파, 전체 스레드가 종료 될 수 있다. 반면에 멀티 프로세스는 각 프로세스가 독립적이기 때문에 한 프로세스의 문제가 다른 프로세스로 전달되지 않는다.



